/* Vars */
:root {
	--bg: #e9edef; /* page background */
	--surface: #ffffff;
	--muted: #98a0ab;
	--whatsapp: #075e54; /* header */
	--whatsapp-light: #128C7E; /* send */
	--bubble-other: #ffffff;
	--bubble-mine: #dcf8c6; /* WhatsApp sent */
}

html { font-size: 15px; }

body, html {
	height: 100%;
	margin: 0;
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
	background: var(--bg);
	color: #202c33;
}

.container {
	width: 100%;
	max-width: 760px;
	margin: 0 auto;
	height: 100%;
	padding: 0;
}

.chat-wrap {
	display: flex;
	flex-direction: column;
	height: 100vh;
	background: var(--surface);
}

.chat-header {
	padding: 10px 14px;
	display: flex;
	align-items: center;
	justify-content: space-between;
	background: var(--whatsapp);
	color: white;
}

.header-left { display:flex; align-items:center; gap:12px; }
.header-avatar { width:36px; height:36px; border-radius:50%; background:#fff; color:var(--whatsapp); display:inline-flex; align-items:center; justify-content:center; font-weight:700; }
.header-meta { display:flex; flex-direction:column; line-height:1; }
.header-title { font-weight:700; font-size:1rem; }
.header-sub { font-size:0.8rem; opacity:0.9 }

.room-id code { background: rgba(255,255,255,0.12); padding:6px 10px; border-radius:999px; color: #e6fbea; font-size:0.78rem; }

/* header room id: render as subtle subheader text, no pill */
.chat-header .header-sub { background: none; padding: 0; border-radius: 0; color: rgba(255,255,255,0.95); font-size:0.85rem; font-weight:400; opacity:0.95; margin-top: 2px; }

.messages { flex:1; overflow-y:auto; padding: 12px 14px; padding-bottom: 96px; display:flex; flex-direction:column; gap:8px; }

.message { display:flex; align-items:flex-end; gap:10px; }

.message.grouped { gap: 8px; }
.message.grouped .bubble { margin-top: 2px; border-top-left-radius: 10px; border-top-right-radius: 10px; }

.avatar { width:32px; height:32px; border-radius:50%; background:#ddd; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:white; font-size:0.9rem; }
.avatar.mine { order:2; background: var(--whatsapp-light); }

.message.mine { justify-content:flex-end; }

.bubble { max-width: 78%; background: var(--bubble-other); padding:10px 12px; border-radius:8px; position:relative; }
.message.mine .bubble { background: var(--bubble-mine); }

.icon-plane { width:18px; height:18px; display:inline-block; vertical-align:middle; }
.btn { display:inline-flex; align-items:center; justify-content:center; }

.meta { display:flex; gap:8px; align-items:center; margin-bottom:6px; }
.meta-name { font-weight:700; color:#075e54; font-size:0.85rem }
.meta-time { font-size:0.72rem; color: #8b94a6; margin-left:auto }

.content { white-space:pre-wrap; word-wrap:break-word; font-size:0.95rem; line-height:1.3 }

.composer { display:flex; gap:8px; padding:10px 14px; align-items:center; border-top:1px solid rgba(0,0,0,0.04); background: transparent }
.input { flex:1; height:38px; padding:0 14px; border-radius:999px; border:1px solid rgba(0,0,0,0.06); font-size:0.95rem; background:white }
.input:focus { outline:none; box-shadow:0 0 0 4px rgba(18,140,126,0.07) }

.btn { height:38px; min-width:48px; padding:0 12px; border-radius:999px; background:var(--whatsapp-light); color:white; border:none; font-weight:700; cursor:pointer; display:inline-flex; align-items:center; justify-content:center }

.btn.disabled { background: rgba(0,0,0,0.06); color: rgba(3,65,58,0.9); cursor: default; opacity:0.95 }
.btn.active { cursor: pointer; background: var(--whatsapp-light); color: white }

.icon-plane { width:18px; height:18px; display:inline-block; vertical-align:middle; transition: transform .18s ease, opacity .18s ease }
.icon-plane.sending { animation: send 420ms cubic-bezier(.2,.8,.2,1) forwards }

/* snappier send: small pop then slide/fade */
@keyframes send {
	0% { transform: translateX(0) rotate(0) scale(1); opacity:1 }
	20% { transform: translateX(4px) rotate(8deg) scale(1.08); }
	60% { transform: translateX(14px) rotate(16deg) scale(0.96); }
	100% { transform: translateX(30px) rotate(24deg) scale(0.9); opacity:0 }
}

@media (max-width:620px) { .container{ max-width:100%; } .header-title{ font-size:0.95rem } .avatar{ width:28px; height:28px; } .input{ height:36px } }

.message {
	display: flex;
	align-items: flex-end;
	gap: 12px;
}

.avatar {
	width: 32px;
	height: 32px;
	border-radius: 50%;
	background: #ffffff;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-weight: 600;
	color: #0b1220;
	box-shadow: 0 2px 8px rgba(15,23,42,0.04);
	font-size: 0.92rem;
}

.avatar.mine {
	order: 2;
	background: #0b84ff;
	color: white;
	box-shadow: 0 2px 8px rgba(11,132,255,0.12);
}

.message.mine {
	justify-content: flex-end;
}

.bubble {
	max-width: 78%;
	background: var(--bubble-other);
	padding: 10px 12px;
	border-radius: 12px;
	box-shadow: 0 2px 8px rgba(11,18,32,0.04);
}

.message.mine .bubble {
	background: #dcf8c6; /* WhatsApp-like green for 'mine' */
	color: #0b1220;
	box-shadow: none;
}

.meta {
	display:flex;
	align-items:center;
	gap:8px;
	font-size:0.84rem;
	color:var(--muted);
	margin-bottom:6px;
}

.meta-name {
	font-weight:600;
	color: #0b1220;
}

.meta-time {
	font-size:0.75rem;
	color: #a3a8b3;
}

.content {
	white-space: pre-wrap;
	word-wrap: break-word;
	font-size: 0.95rem;
	line-height: 1.35;
}

.composer {
	display: flex;
	gap: 8px;
	padding: 10px 14px;
	border-top: 1px solid rgba(11,18,32,0.04);
	align-items: center;
	background: rgba(255,255,255,0.98);
	position: sticky;
	bottom: 0;
	z-index: 20;
	box-shadow: 0 -6px 20px rgba(11,18,32,0.04);
}

.input {
	flex: 1;
	height: 40px;
	padding: 0 14px;
	border-radius: 999px;
	border: 1px solid rgba(11,18,32,0.06);
	font-size: 0.98rem;
	background: white;
	box-shadow: none;
}

.input:focus {
	outline: none;
	box-shadow: 0 0 0 4px rgba(11,132,255,0.08);
}

.btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: 40px;
	min-width: 40px;
	width: 40px;
	background: var(--whatsapp-light);
	color: white;
	padding: 0;
	border-radius: 50%;
	border: none;
	cursor: pointer;
	font-size: 0;
	box-shadow: none;
	transition: transform .12s ease, box-shadow .12s ease;
}

.btn:hover {
	transform: translateY(-2px) scale(1.02);
	box-shadow: 0 6px 18px rgba(3,65,58,0.06);
}

.btn.disabled { opacity:0.9 }

/* small screens */
@media (max-width: 620px) {
	.messages { padding: 16px; }
	.avatar { width: 36px; height: 36px; }
	.bubble { max-width: 80%; }
	.title { font-size: 1.125rem; }
}

/* Remove avatars: hide avatar elements for DM-like UI */
.header-avatar, .avatar { display: none !important; }
/* keep message spacing tighter since avatars aren't shown */
.messages { gap: 8px; }
